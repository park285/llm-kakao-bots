# AI Provider Selection (gemini only)
AI_PROVIDER=gemini

# Google Gemini Developer API
# Single key
GOOGLE_API_KEY=
# Optional: multiple keys for rotation (comma-separated or space-separated)
# Example: GOOGLE_API_KEYS="key1,key2 key3"  (any of comma/space/newline is accepted)
GOOGLE_API_KEYS=
GOOGLE_CLOUD_PROJECT=
GOOGLE_CLOUD_LOCATION=us-central1

# Gemini Model Selection (supports 3.0 and 2.5)
# Examples: gemini-3-pro-preview, gemini-2.5-flash-preview-09-2025, gemini-2.5-pro
GEMINI_MODEL=gemini-2.5-flash-preview-09-2025
# Optional override used ONLY for Q&A (answer) requests; leave empty to use GEMINI_MODEL
GEMINI_ANSWER_MODEL=

# Gemini 3.0 Thinking Level ("low"/"high") - controls reasoning depth
# Used when GEMINI_MODEL starts with "gemini-3"
GEMINI_THINKING_LEVEL_HINTS=high
GEMINI_THINKING_LEVEL_ANSWER=low
GEMINI_THINKING_LEVEL_VERIFY=high

# Gemini 2.5 Thinking Budget (token count) - controls reasoning depth
# Used when GEMINI_MODEL starts with "gemini-2.5"
# Values: 0=disabled, -1=dynamic (model decides), positive=fixed budget
# Ranges: 2.5 Flash (0~24576), 2.5 Pro (128~32768)
GEMINI_THINKING_BUDGET_HINTS=8192
GEMINI_THINKING_BUDGET_ANSWER=4096
GEMINI_THINKING_BUDGET_VERIFY=2048

# Context caching configuration (reduces latency by ~80% for repeated prompts)
GEMINI_CACHE_ENABLED=true
GEMINI_CACHE_TTL_SECONDS=604800  # 7 days (prompts/personas are static)


# Valkey (Redis protocol) - Cache/Session
# 도커 컴포즈 환경에서는 valkey-cache 로 설정
CACHE_HOST=valkey-cache
CACHE_PORT=6379
CACHE_PASSWORD=
CACHE_SSL=false
CACHE_TIMEOUT=5000
SESSION_TTL_MINUTES=30

# Valkey (Redis protocol) - MQ Communication
# 도커 컴포즈 환경에서는 valkey-mq 로 설정
MQ_HOST=valkey-mq
MQ_PORT=1833
MQ_PASSWORD=
MQ_TIMEOUT=5000

# PostgreSQL (R2DBC)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=twentyq
DB_USER=twentyq_app
DB_PASSWORD=

# Riddle validation
RIDDLE_VALIDATION_MAX_RETRIES=1

# Security - Injection Guard
APP_SECURITY_INJECTION_ENABLED=true
INJECTION_GUARD_THRESHOLD=0.85

# Server
SERVER_PORT=8085

# LLM REST (mcp-llm-server)
LLM_REST_BASE_URL=http://localhost:40527
LLM_REST_HTTP2_ENABLED=true
LLM_REST_HEALTH_ENABLED=true
LLM_REST_HEALTH_PATH=/health
LLM_REST_HEALTH_FAILURE_THRESHOLD=5
LLM_REST_HEALTH_RESTART_COMMAND=./bot-restart.sh
LLM_REST_HEALTH_RESTART_CONTAINERS=mcp-llm-server
LLM_REST_HEALTH_DOCKER_SOCKET=/var/run/docker.sock
LLM_REST_HEALTH_RESTART_LOCK_KEY=shared:watchdog:restart:mcp-llm-server
LLM_REST_HEALTH_RESTART_LOCK_TTL_SECONDS=120


ACCESS_ENABLED=false
ALLOWED_CHAT_IDS=
COMMAND_PREFIX=/20q

# Admin user IDs (comma-separated)
# Users in this list can use admin commands like "/20q 관리자 강제종료" and "/20q 관리자 전체삭제"
ADMIN_USER_IDS=
