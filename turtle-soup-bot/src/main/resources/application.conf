server {
    host = "0.0.0.0"
    host = ${?SERVER_HOST}
    port = 40257
    port = ${?SERVER_PORT}
}

# LLM REST API 설정
llmRest {
    baseUrl = "http://localhost:40527"
    baseUrl = ${?LLM_REST_BASE_URL}
    timeoutSeconds = 120
    timeoutSeconds = ${?LLM_REST_TIMEOUT_SECONDS}
    connectTimeoutSeconds = 10
    connectTimeoutSeconds = ${?LLM_REST_CONNECT_TIMEOUT_SECONDS}
    http2Enabled = true
    http2Enabled = ${?LLM_REST_HTTP2_ENABLED}
    healthEnabled = true
    healthEnabled = ${?LLM_REST_HEALTH_ENABLED}
    healthPath = "/health"
    healthPath = ${?LLM_REST_HEALTH_PATH}
    healthIntervalMillis = 60000
    healthIntervalMillis = ${?LLM_REST_HEALTH_INTERVAL_MILLIS}
    healthFailureThreshold = 5
    healthFailureThreshold = ${?LLM_REST_HEALTH_FAILURE_THRESHOLD}
    healthRestartCommand = "./bot-restart.sh"
    healthRestartCommand = ${?LLM_REST_HEALTH_RESTART_COMMAND}
    healthRestartContainers = []
    healthRestartContainers = ${?LLM_REST_HEALTH_RESTART_CONTAINERS}
    healthDockerSocket = "/var/run/docker.sock"
    healthDockerSocket = ${?LLM_REST_HEALTH_DOCKER_SOCKET}
}

# 퍼즐 프리셋 설정
puzzle {
    # LLM으로 시나리오 리라이트 (true: 가공, false: 원본 그대로)
    rewriteEnabled = true
    rewriteEnabled = ${?PUZZLE_REWRITE_ENABLED}
}

redis {
    host = "localhost"
    host = ${?REDIS_HOST}
    port = 6379
    port = ${?REDIS_PORT}
    password = ""
    password = ${?REDIS_PASSWORD}
}

valkeyMq {
    host = "localhost"
    host = ${?VALKEY_MQ_HOST}
    port = 1833
    port = ${?VALKEY_MQ_PORT}
    password = ""
    password = ${?VALKEY_MQ_PASSWORD}
    timeout = 5000
    timeout = ${?VALKEY_MQ_TIMEOUT}
    connectionPoolSize = 64
    connectionPoolSize = ${?VALKEY_MQ_CONNECTION_POOL_SIZE}
    connectionMinIdleSize = 10
    connectionMinIdleSize = ${?VALKEY_MQ_CONNECTION_MIN_IDLE_SIZE}
    consumerGroup = "turtle-soup-bot-group"
    consumerGroup = ${?VALKEY_MQ_CONSUMER_GROUP}
    consumerName = "consumer-1"
    consumerName = ${?VALKEY_MQ_CONSUMER_NAME}
    streamKey = "kakao:turtle-soup"
    streamKey = ${?VALKEY_MQ_STREAM_KEY}
    replyStreamKey = "kakao:bot:reply"
    replyStreamKey = ${?VALKEY_MQ_REPLY_STREAM_KEY}
}

access {
    enabled = true
    enabled = ${?ACCESS_ENABLED}
    # 리스트는 Settings.kt에서 ENV로 오버라이드
    allowedChatIds = ["267947734"]
    blockedChatIds = []
    blockedUserIds = []
    passthrough = false
    passthrough = ${?ACCESS_PASSTHROUGH}
}
